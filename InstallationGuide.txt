Quickstart (simplified) — React (Vite) + Django REST

This short guide gets you from a fresh clone to a running local dev environment (backend + frontend) and
shows how to generate sample data and run the test suite — both manually and with helper scripts.

Prerequisites
- Node.js (LTS), Python 3.11+ (3.12 recommended), Git

1) Clone and open the repo

```powershell
git clone <repo-url>
cd SOEN-341-Events-Web-App
code .
```

1) Backend quick setup (one-time)

From the repository root, run these commands.

Windows (PowerShell):
```powershell
cd backend\collegeEventsWeb
python -m venv .venv          # create venv if missing
.\.venv\Scripts\Activate.ps1
python -m pip install --upgrade pip setuptools wheel
pip install -r requirements.txt
python manage.py migrate --noinput
python manage.py createsuperuser --email you@example.com
```

macOS / Linux (bash):
```bash
cd backend/collegeEventsWeb
python3 -m venv .venv        # create venv if missing
source .venv/bin/activate
python -m pip install --upgrade pip setuptools wheel
pip install -r requirements.txt
python manage.py migrate --noinput
python manage.py createsuperuser --email you@example.com
```

Start the backend (from `backend/collegeEventsWeb`):
```bash
python manage.py runserver 8000
```

2) Frontend quick setup

Open a second terminal (repo root) and run the frontend dev server.

Recommended (helper script):
PowerShell:
```powershell
.\scripts\start-frontend.ps1
```
bash:
```bash
./scripts/start-frontend.sh
```

Manual (first time only):
```bash
cd frontend
npm install
npm run dev
```

Vite runs at `http://localhost:5173` and proxies `/api` → `http://localhost:8000` by default.

3) Generate sample data

You can populate the DB with venues, events, organizers, students and registrations either with the
included script or manually via the Django shell.

With the script (recommended):
From the repo root (venv activated):

PowerShell (Windows):
```powershell
# activate the project's venv first (PowerShell)
cd backend\collegeEventsWeb
.\.venv\Scripts\Activate.ps1
cd ..\..
# run generator from repo root
python .\scripts\generate_sample_data.py --venues 4 --events-per-venue 5 --students 50 --organizers 4 --registrations-per-event 10
```

Bash / macOS / Linux:
```bash
# activate the project's venv first (bash)
cd backend/collegeEventsWeb
source .venv/bin/activate
cd ../..
python ./scripts/generate_sample_data.py --venues 4 --events-per-venue 5 --students 50 --organizers 4 --registrations-per-event 10
```

Manual (Django shell):
```bash
cd backend/collegeEventsWeb
# activate venv first
source .venv/bin/activate   # or on Windows: .\.venv\Scripts\Activate.ps1
python manage.py shell
```
Then run a short Python snippet at the prompt (example):
```python
from django.utils import timezone
from django.contrib.auth import get_user_model
from event_management.models import Venue, Event
User = get_user_model()
# create a user, venue and event
u = User.objects.create_user(email='student1@example.com', name='Student 1', password='password')
v = Venue.objects.create(name='Dev Hall', address='100 Dev Ln', capacity=200)
start = timezone.now() + timezone.timedelta(days=7)
Event.objects.create(title='Dev Meetup', description='Sample', organization='Dev', category='General', start_time=start, end_time=start + timezone.timedelta(hours=2), is_approved=True)
```

4) Run tests

Manual (single module or all tests):
From the repo root with the backend venv activated:

PowerShell:
```powershell
cd backend\collegeEventsWeb
.\.venv\Scripts\Activate.ps1
python manage.py test backend.tests.test_integration -v 2
# or run entire test suite
python manage.py test
```

bash:
```bash
cd backend/collegeEventsWeb
source .venv/bin/activate
python manage.py test backend.tests.test_integration -v 2
# or run entire test suite
python manage.py test
```

With helper scripts (recommended):
```powershell
# PowerShell (from repo root)
.\scripts\run-tests.ps1
```
```bash
# bash
./scripts/run-tests.sh
```

5) Troubleshooting notes
- If migrations fail because your local sqlite DB is out-of-sync with migrations, you may delete the local DB and re-run migrations (dev-only, destructive):
```powershell
Remove-Item backend\collegeEventsWeb\db.sqlite3 -Force
cd backend\collegeEventsWeb
.\.venv\Scripts\Activate.ps1
python manage.py migrate --noinput
python manage.py createsuperuser
```
- If venv activation is blocked on Windows, allow it for the session:
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process -Force
. .\.venv\Scripts\Activate.ps1
```
- For CSRF issues from the SPA, prefer using Vite's proxy so API calls are same-origin. If you call the backend directly, ensure `CORS_ALLOW_CREDENTIALS = True` and adjust cookie SameSite settings in `settings.py` for local dev.

6) Helper scripts reference
- `scripts/start-backend.ps1` / `scripts/start-backend.sh` — create/activate venv, install backend deps and run the Django dev server.
- `scripts/start-frontend.ps1` / `scripts/start-frontend.sh` — ensure `node_modules`, install runtime packages and start Vite.
- `scripts/run-tests.ps1` / `scripts/run-tests.sh` — run the integration tests (creates venv if needed, migrates, runs tests).
- `scripts/generate_sample_data.py` — generates sample venues, events, organizers, students and registrations (run from repo root).

Convert sample-data to management command?
If you prefer `python manage.py generate_sample_data`, I can convert `scripts/generate_sample_data.py` into a Django management command. Tell me if you'd like that.

--

Concise quick commands

PowerShell (repo root):
```powershell
# start backend
.\scripts\start-backend.ps1

# start frontend (new terminal)
.\scripts\start-frontend.ps1

# generate sample data (run from repo root; ensure the venv is activated first)
python .\scripts\generate_sample_data.py --venues 4 --events-per-venue 5 --students 50 --organizers 4 --registrations-per-event 10

# run tests
.\scripts\run-tests.ps1
```

Bash (repo root):
```bash
# start backend
chmod +x ./scripts/start-backend.sh    # if "permission denied"
./scripts/start-backend.sh

# start frontend (new terminal)
chmod +x ./scripts/start-frontend.sh    # if "permission denied"
./scripts/start-frontend.sh

# generate sample data (bash)
source backend/collegeEventsWeb/.venv/bin/activate
python ./scripts/generate_sample_data.py --venues 4 --events-per-venue 5 --students 50 --organizers 4 --registrations-per-event 10

# run tests
chmod +x ./scripts/run-tests.sh  # if "permission denied"
./scripts/run-tests.sh
```

Troubleshooting: UNIQUE constraint failed when running the generator
```text
django.db.utils.IntegrityError: UNIQUE constraint failed: users.email
```
- Cause: the generator creates deterministic emails (student1@example.com, organizer1@example.com, ...). Rerunning it against an existing DB will attempt to recreate users and hit the unique email constraint.
- Fixes:
	- Re-run the generator after removing the local DB (dev-only, destructive):
		- PowerShell:
			```powershell
			Remove-Item backend\collegeEventsWeb\db.sqlite3 -Force
			cd backend\collegeEventsWeb
			.\.venv\Scripts\Activate.ps1
			python manage.py migrate --noinput
			```
		- Bash:
			```bash
			rm backend/collegeEventsWeb/db.sqlite3
			cd backend/collegeEventsWeb
			source .venv/bin/activate
			python manage.py migrate --noinput
			```
	- Or run the generator with smaller counts or different ranges so it won't collide with existing users.
	- Alternatively you can inspect and remove the specific conflicting users from the Django admin or using `manage.py shell`.




